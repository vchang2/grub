{% extends "app_base.html" %}
{% block content %}
{# include the first two lines above to extend the app_base template #}

{% if userID %}
	<h3>{{ userID | e}}'s Profile</h3>
		{% if not viewingOwnProfile %}
			<form action="user?userID={{userID}}" method="POST">
				<input type="hidden" name="userID" value={{userID | e}}>
				<input type="hidden" name="addFollower" value={{userID}}>
				<input type="submit" value="Follow">
			</form>
		{% endif %}
	<br>
	<h4>About Me</h4>
	{% if userAboutMe %}
		<p>{{userAboutMe[0]['Description'] | e}}</p>
	{% else %}
		<p>Write an About me!</p>
	{% endif %}
	{% if viewingOwnProfile %}
		{% if not editAbout %}
			<form action="user?userID={{userID}}" method="POST">
				<input type="hidden" name="userID" value={{userID | e}}>
				<input type="hidden" name="editAboutMe">
				<input type="submit" value="Edit">
			</form>
		{% else %}
			<form action="user?userID={{userID}}" method="POST">
				<input type="hidden" name="userID" value={{userID | e}}>
				<input type="text" name="newAboutMe"><br>
				<input type="submit" value="Make Change!">

			</form>
		{% endif %}
	{% endif %}
	<br>
	<h4>Recipes</h4>
	<ul>
	{% if userRecipes %}
		{% for result in userRecipes %}
			{% if result['Overall_rating'] == 0.0 %}
				<li><a href = view?recipeID={{result['RecipeID'] | e}}>{{result['Recipe_name'] | e }} - {{ result['Description'] | e}} - Rating N/A</a></li>
			{% else %}
				<li><a href = view?recipeID={{result['RecipeID'] | e}}>{{result['Recipe_name'] | e }} - {{ result['Description'] | e}} - {{ result['Overall_rating'] | e}} stars</a></li>
			{% endif %}

			{% if currentUser == userID %}
				<form action="user?userID={{userID}}" method="POST">
					<input type="hidden" name="deleteRecipe" value={{result['RecipeID']| e}}>
					<input type="submit" value="Delete">
				</form>
			{% endif %}
			
		{% endfor %}
	{% else %}
		<li>No Recipes</li>
	{% endif %}
	</ul>

	<br>
	<h4>{{ userID | e}}'s Followers</h4>
	<ul>
	{% if userFollowers %}
		{% for follower in userFollowers %}
			<li><a href = user?userID={{follower['FollowerID'] | e}}>{{follower['FollowerID'] | e }}</a></li>
		{% endfor %}
	{% else %}
		<li>No Followers</li>
	{% endif %}
	</ul>

	<br>
	<h4>Users {{ userID | e}} Follows</h4>
	<ul>
	{% if userFollowing %}
		{% for following in userFollowing %}
			<li><a href = user?userID={{following['UserID'] | e}}>{{following['UserID'] | e }}</a></li>
			{% if viewingOwnProfile %}
				<form action="user?userID={{userID}}" method="POST">
					<input type="hidden" name="userID" value={{userID}}>
					<input type="hidden" name="unfollowing" value={{following['UserID']| e}}>
					<input type="submit" value="Unfollow">
				</form>
			{% endif %}
		{% endfor %}
	{% else %}
		<li>{{ userID | e}} does not follow any users</li>
	{% endif %}
	</ul>

	<br>
	<h4>{{ userID | e}}'s Cookbooks</h4>
	<ul>
	{% if userCookbooks %}
		{% for cookbook in userCookbooks %}
			<li><a href = cookbook?cookbookID={{cookbook['CookbookID'] | e}}>{{cookbook['Cookbook_name'] | e }}</a></li>
			{% if viewingOwnProfile %}
				<form action="user?userID={{userID}}" method="POST">
					<input type="hidden" name="userID" value={{userID}}>
					<input type="hidden" name="deleteCookbook" value={{cookbook['CookbookID']| e}}>
					<input type="submit" value="Delete">
				</form>
			{% endif %}
		{% endfor %}
	{% else %}
		<li>{{ userID | e}} does not have any cookbooks</li>
	{% endif %}
	</ul>
	{% if viewingOwnProfile %}
		<form action="user?userID={{userID}}" method="POST">
			<input type="hidden" name="userID" value={{userID | e}}>
				<input type="text" name="cookbook"><br>
				<input type="submit" value="Add Cookbook">

		</form>
	{% endif %}
	<!--<form name="c" action="user" method="POST">
		<button id="cookbook" onclick="myFunction()">Add Cookbook</button>
	</form>
	<p id="demo"></p>

	<script type="text/javascript">
	function myFunction() {
	    var cookbook = prompt("Please type in name of Cookbook");
	    
	    if (cookbook != null) {
	        document.getElementById("demo").innerHTML =
	        "Cookbook has been added!";
	        document.c.submit();
	    }
	}
	</script>-->

{% else %}
	<h3>User Not Found</h3>
{% endif %}



{% endblock %}